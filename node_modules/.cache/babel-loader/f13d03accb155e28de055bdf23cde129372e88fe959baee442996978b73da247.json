{"ast":null,"code":"import _regeneratorRuntime from\"/home/mayank/Desktop/React.js/newsapp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/mayank/Desktop/React.js/newsapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/mayank/Desktop/React.js/newsapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import InfiniteScroll from'react-infinite-scroll-component';import Newsitem from'./Newsitem';import Spinner from'./Spinner';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var News=function News(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalResults=_useState8[0],setTotalResults=_useState8[1];var capitalizeFirstLetter=function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1);};var updateNews=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url,response,parsedData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:props.setProgress(10);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=06116f28526f48bcae830fb9eeff9cb2&page=\").concat(page+1,\"&pageSize=\").concat(props.pageSize);setLoading(true);_context.prev=3;_context.next=6;return axios.get(url);case 6:response=_context.sent;props.setProgress(30);parsedData=response.data;props.setProgress(70);setArticles(parsedData.articles);setTotalResults(parsedData.totalResults);_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](3);console.error('Error fetching news:',_context.t0);case 17:setLoading(false);props.setProgress(100);case 19:case\"end\":return _context.stop();}},_callee,null,[[3,14]]);}));return function updateNews(){return _ref.apply(this,arguments);};}();var fetchMoreData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var url,response,parsedData;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setPage(page+1);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(props.country,\"&category=\").concat(props.category,\"&apiKey=06116f28526f48bcae830fb9eeff9cb2&page=\").concat(page+1,\"&pageSize=\").concat(props.pageSize);_context2.prev=2;_context2.next=5;return axios.get(url);case 5:response=_context2.sent;parsedData=response.data;setArticles(function(prevArticles){return prevArticles.concat(parsedData.articles);});setTotalResults(parsedData.totalResults);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](2);console.error('Error fetching more news:',_context2.t0);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[2,11]]);}));return function fetchMoreData(){return _ref2.apply(this,arguments);};}();var handlePrevClick=function handlePrevClick(){setPage(page-1);};var handleNextClick=function handleNextClick(){setPage(page+1);};useEffect(function(){document.title=\"\".concat(capitalizeFirstLetter(props.category),\" - MayankNews\");updateNews();// eslint-disable-next-line\n},[props.country,props.category,props.pageSize]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container my-3\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-center\",style:{margin:'35px',marginTop:'90px'},children:[\"MayankNews - Top \",capitalizeFirstLetter(props.category),\" Headlines\"]}),loading&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:articles.length,next:fetchMoreData,hasMore:articles.length!==totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:articles.map(function(element){return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(Newsitem,{title:element.title?element.title:'',description:element.description?element.description.slice():'',imageurl:element.urlToImage,newsurl:element.url,author:element.author,date:element.publishedAt,source:element.source.name},element.url)},element.url);})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"container d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark\",onClick:handlePrevClick,disabled:page===1,children:\"\\u2190 Previous\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark\",onClick:handleNextClick,disabled:page*props.pageSize>=totalResults,children:\"Next \\u2192\"})]})]});};News.defaultProps={country:'in',pageSize:8,category:'general'};export default News;","map":{"version":3,"names":["React","useEffect","useState","axios","InfiniteScroll","Newsitem","Spinner","jsxs","_jsxs","jsx","_jsx","News","props","_useState","_useState2","_slicedToArray","articles","setArticles","_useState3","_useState4","loading","setLoading","_useState5","_useState6","page","setPage","_useState7","_useState8","totalResults","setTotalResults","capitalizeFirstLetter","string","charAt","toUpperCase","slice","updateNews","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","response","parsedData","wrap","_callee$","_context","prev","next","setProgress","concat","country","category","pageSize","get","sent","data","t0","console","error","stop","apply","arguments","fetchMoreData","_ref2","_callee2","_callee2$","_context2","prevArticles","handlePrevClick","handleNextClick","document","title","className","children","style","margin","marginTop","dataLength","length","hasMore","loader","map","element","description","imageurl","urlToImage","newsurl","author","date","publishedAt","source","name","onClick","disabled","defaultProps"],"sources":["/home/mayank/Desktop/React.js/newsapp/src/components/News.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport InfiniteScroll from 'react-infinite-scroll-component';\n\nimport Newsitem from './Newsitem';\nimport Spinner from './Spinner';\n\nconst News = (props) => {\n  const [articles, setArticles] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [totalResults, setTotalResults] = useState(0);\n\n  const capitalizeFirstLetter = (string) => {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  };\n\n  const updateNews = async () => {\n    props.setProgress(10);\n    const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=06116f28526f48bcae830fb9eeff9cb2&page=${page+1}&pageSize=${props.pageSize}`;\n    setLoading(true);\n    try {\n      let response = await axios.get(url);\n      props.setProgress(30);\n      let parsedData = response.data;\n      props.setProgress(70);\n      setArticles(parsedData.articles);\n      setTotalResults(parsedData.totalResults);\n    } catch (error) {\n      console.error('Error fetching news:', error);\n    }\n    setLoading(false);\n    props.setProgress(100);\n  };\n\n  const fetchMoreData = async () => {\n    setPage(page + 1);\n    const url = `https://newsapi.org/v2/top-headlines?country=${props.country}&category=${props.category}&apiKey=06116f28526f48bcae830fb9eeff9cb2&page=${page+1}&pageSize=${props.pageSize}`;\n    try {\n      let response = await axios.get(url);\n      let parsedData = response.data;\n      setArticles((prevArticles) => prevArticles.concat(parsedData.articles));\n      setTotalResults(parsedData.totalResults);\n    } catch (error) {\n      console.error('Error fetching more news:', error);\n    }\n  };\n\n  const handlePrevClick = () => {\n    setPage(page - 1);\n  };\n\n  const handleNextClick = () => {\n    setPage(page + 1);\n  };\n\n  useEffect(() => {\n    document.title = `${capitalizeFirstLetter(props.category)} - MayankNews`;\n    updateNews();\n    // eslint-disable-next-line\n  }, [props.country, props.category, props.pageSize]);\n\n  return (\n    <div className=\"container my-3\">\n      <h1 className=\"text-center\" style={{ margin: '35px', marginTop: '90px' }}>\n        MayankNews - Top {capitalizeFirstLetter(props.category)} Headlines\n      </h1>\n      {loading && <Spinner />}\n      <InfiniteScroll\n        dataLength={articles.length}\n        next={fetchMoreData}\n        hasMore={articles.length !== totalResults}\n        loader={<Spinner />}\n      >\n        <div className=\"container\">\n          <div className=\"row\">\n            {articles.map((element) => (\n              <div className=\"col-md-4\" key={element.url}>\n                <Newsitem\n                  key={element.url}\n                  title={element.title ? element.title : ''}\n                  description={element.description ? element.description.slice() : ''}\n                  imageurl={element.urlToImage}\n                  newsurl={element.url}\n                  author={element.author}\n                  date={element.publishedAt}\n                  source={element.source.name}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </InfiniteScroll>\n      <div className=\"container d-flex justify-content-between\">\n        <button\n          className=\"btn btn-dark\"\n          onClick={handlePrevClick}\n          disabled={page === 1}\n        >\n          &larr; Previous\n        </button>\n        <button\n          className=\"btn btn-dark\"\n          onClick={handleNextClick}\n          disabled={page * props.pageSize >= totalResults}\n        >\n          Next &rarr;\n        </button>\n      </div>\n    </div>\n  );\n};\n\nNews.defaultProps = {\n  country: 'in',\n  pageSize: 8,\n  category: 'general',\n};\n\nNews.propTypes = {\n  country: PropTypes.string,\n  pageSize: PropTypes.number,\n  category: PropTypes.string,\n};\n\nexport default News;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}